<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>aside - Bootstrap 4 web application</title>
  
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" type="text/css" />

  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" type="text/css" />

  <!-- build:css css/styles/app.min.css -->
  <link rel="stylesheet" href="/css/app.css" type="text/css" />
  <link rel="stylesheet" href="/css/style.css" type="text/css" />


  <link rel="stylesheet" href="/css/svcc.css" type="text/css" />
</head>
<body>
  <div class="app" id="app">
        <div class="app-header white bg b-b">
        <div class="navbar" data-pjax>
                <a data-toggle="modal" data-target="#aside" class="navbar-item pull-left hidden-lg-up p-r m-a-0">
                  <i class="ion-navicon"></i>
                </a>
                <div class="navbar-item pull-left h5" id="pageTitle">SVCC</div>
                <div class="navbar-item pull-center h5" id="pageTitle">
                  <span id="murti-button" style="">Murti</span>
                  <span id="devotee-button" style="">Devotees</span>
                </div>
                <div class="navbar-item pull-right h5" id="checkout">Request</div>
          </div>
          </div>
<span id="murti">
<span class="img__wrap">
    <img class="img__img" id="1" src="/svcc/IMG_6745.JPG" />
    <span class="img__description_layer_left">
      <p class="img__description">#1</p>
    </span>
    <span class="img__description_layer_right">
        <span class="selected" id="IMG_6746.JPG" >select</span>
      </span>
</span>
<span class="img__wrap">
    <img class="img__img" id="2" src="/svcc/IMG_6747.JPG" />
    <span class="img__description_layer_left">
        <p class="img__description">#2</p>
      </span>
      <span class="img__description_layer_right">
          <span class="selected" id="IMG_6747.JPG" >select</span>
        </span>
</span>
</span>
<div id="devotee" style="display:none;">
    <span class="img__wrap">
        <img class="img__img" id="1" src="/svcc/IMG_6752.JPG" />
        <span class="img__description_layer_left">
          <p class="img__description">#1</p>
        </span>
        <span class="img__description_layer_right">
            <span class="selected" id="IMG_6746.JPG" >select</span>
          </span>
    </span>
    <span class="img__wrap">
        <img class="img__img" id="2" src="/svcc/IMG_6761.JPG" />
        <span class="img__description_layer_left">
            <p class="img__description">#2</p>
          </span>
          <span class="img__description_layer_right">
              <span class="selected" id="IMG_6747.JPG" >select</span>
            </span>
    </span>
  </div>
<div style="display:none; margin-top: 75px;padding-bottom: 60px; " class="box padding" id="cart">
    <div class="form-group row">
        <label class="col-sm-2 form-control-label">Fullname</label>
        <div class="col-sm-10">
          <input id="fullname"type="text" class="form-control rounded">
        </div>
      </div>
    <div class="form-group row">
        <label class="col-sm-2 form-control-label">Email</label>
        <div class="col-sm-10">
          <input id="email"type="text" class="form-control rounded">
        </div>
      </div>
    <div class="form-group row">
        <label class="col-sm-2 form-control-label">Phone</label>
        <div class="col-sm-10">
          <input id="phone" type="text" class="form-control rounded">
        </div>
      </div>
      <button class="btn green pull-right"  id="request">Request</button>
      <a href='#' id="download" >Download CSV</a>

</div>

<!-- ############ LAYOUT END-->
   </div>

   
<!-- build:js scripts/app.min.js -->
<!-- jQuery -->
  <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"></script>

  <script>
   $(document).ready(function() {
    var selected = [];
    var Request = [];
    $(".selected").click(function(){
      alert(this.id);
      selected.push( this.id );
    })

    $("#checkout").click(function(){
      $("#murti").hide();
      $("#devotee").hide();
      $("#cart").show();
      
    })

    $("#request").click(function(){
      console.log(selected);
      
      var fullname = $("#fullname").val();
      var email = $("#email").val();
      var phone = $("#phone").val();
      Request.push({"name":fullname,"email": email,"phone":phone,"img_list":selected});
      console.log(Request);
    })

    $("#murti-button").click(function(){
      $("#murti").show();
      $("#devotee").hide();
      $("#cart").hide();
    })
    $("#devotee-button").click(function(){
      $("#murti").hide();
      $("#devotee").show();
      $("#cart").hide();
    })
 
    $("#download").click(function(){
      downloadCSV();
    })
  
 
  var stockData = [
      {
          Symbol: "AAPL",
          Company: "Apple Inc.",
          Price: "132.54"
      },
      {
          Symbol: "INTC",
          Company: "Intel Corporation",
          Price: "33.45"
      },
      {
          Symbol: "GOOG",
          Company: "Google Inc",
          Price: "554.52"
      },
  ];

  function convertArrayOfObjectsToCSV(args) {
      var result, ctr, keys, columnDelimiter, lineDelimiter, data;

      data = args.data || null;
      if (data == null || !data.length) {
          return null;
      }

      columnDelimiter = args.columnDelimiter || ',';
      lineDelimiter = args.lineDelimiter || '\n';

      keys = Object.keys(data[0]);

      result = '';
      result += keys.join(columnDelimiter);
      result += lineDelimiter;

      data.forEach(function(item) {
          ctr = 0;
          keys.forEach(function(key) {
              if (ctr > 0) result += columnDelimiter;

              result += item[key];
              ctr++;
          });
          result += lineDelimiter;
      });

      return result;
  }

  function downloadCSV() {
    alert("downloading")
      var data, filename, link;

      var csv = convertArrayOfObjectsToCSV({
          data: Request
      });
      if (csv == null) return;

      filename = 'export.csv';

      if (!csv.match(/^data:text\/csv/i)) {
          csv = 'data:text/csv;charset=utf-8,' + csv;
      }
      data = encodeURI(csv);

      link = document.createElement('a');
      link.setAttribute('href', data);
      link.setAttribute('download', filename);
      link.click();
  }
});
</script>  

  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.pjax/2.0.1/jquery.pjax.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.blockUI/2.70/jquery.blockUI.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jscroll/2.4.1/jquery.jscroll.min.js"></script>


</body>
</html>
